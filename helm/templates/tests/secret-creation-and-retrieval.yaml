apiVersion: v1
kind: Pod
metadata:
  name: "secret-creation-and-retrieval"
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: kubectl
      image: "k8s.gcr.io/hyperkube:latest"
      imagePullPolicy: "IfNotPresent"
      command:
        - /bin/sh
        - -c
        - >
          kubectl create secret generic {{ .Chart.Name }}-test-secret -n vault --from-literal=hello=world
          kubectl describe secret {{ .Chart.Name }}-test-secret -n vault
  restartPolicy: Never
