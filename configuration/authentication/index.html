<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Vault KMS Provider</title>
        <link rel="stylesheet" href="/css/index.css">
        <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
        <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-solarizedlight.css" rel="stylesheet"/>
    </head>
    <body style="background-color: #ffffff">
        
<div class="homepage">
    <div class="sidebar">
       <div class="navbar">
           <div>
             <a href="/">
               <h2>Quick Start</h2>
             </a>
           </div>
           
               
                   
               
           
               
                   
               
           
               
                   
                   <div>
                     
                       <a href="/configuration"><h2>Configuration</h2></a>
                     
                     <ul>
                       
                         <li><a href=/configuration/authentication/>Authentication</a></li>
                       
                         <li><a href=/configuration/kubernetes/>Kubernetes</a></li>
                       
                         <li><a href=/configuration/provider/>Provider</a></li>
                       
                         <li><a href=/configuration/tls/>Tls</a></li>
                       
                         <li><a href=/configuration/vault/>Vault</a></li>
                       
                     </ul>
                   </div>
                   
               
           
               
                   
               
           
               
                   
                   <div>
                     
                       <a href="/installation"><h2>Installation</h2></a>
                     
                     <ul>
                       
                         <li><a href=/installation/docker/>Docker</a></li>
                       
                         <li><a href=/installation/helm/>Helm</a></li>
                       
                         <li><a href=/installation/repository/>Repository</a></li>
                       
                         <li><a href=/installation/static/>Static</a></li>
                       
                     </ul>
                   </div>
                   
               
           
               
                   
                   <div>
                     
                       <h2>Benchmarks</h2>
                     
                     <ul>
                       
                         <li><a href=/benchmarks/decryption/>Decryption</a></li>
                       
                         <li><a href=/benchmarks/encryption/>Encryption</a></li>
                       
                         <li><a href=/benchmarks/health/>Health</a></li>
                       
                     </ul>
                   </div>
                   
               
           
       </div>
    </div>
    <div class="content">
        
<div class="content-header">
    
        <div class="markdown-alert markdown-alert-warning"><p class="markdown-alert-title"><svg class="octicon octicon-alert mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p><p>This plugin is currently awaiting <a href="https://github.com/kubernetes/kubernetes/pull/126930">a fix</a> to be released in <a href="https://github.com/kubernetes/kubernetes/milestone/65">Kubernetes version 1.32</a>. Until <a href="https://github.com/kubernetes/kubernetes/pull/126930">the fix</a> is released by the Kubernetes team, this plugin will not work.</p>
</div>

    
    <h1>Configuration</h1>
</div>
<div class="content-body">
    <h2>Authentication</h2>
<p>Currently, the following authentication methods are supported</p>
<ul>
<li><a href="https://developer.hashicorp.com/vault/api-docs/auth/token">Token</a></li>
<li><a href="https://developer.hashicorp.com/vault/docs/auth/kubernetes">Kubernetes</a></li>
<li><a href="https://developer.hashicorp.com/vault/docs/auth/userpass">UserPass</a></li>
<li><a href="https://developer.hashicorp.com/vault/docs/auth/approle">AppRole</a></li>
<li><a href="https://developer.hashicorp.com/vault/docs/auth/jwt">JWT/OIDC</a></li>
<li><a href="https://developer.hashicorp.com/vault/docs/auth/cert">Certificate</a></li>
</ul>
<p>Configuration of auth methods is done using the environment variables listed below.</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token comment"># Path defined for the authentication route, ex: auth/custom-auth-path/...</span>
<span class="token comment">#  if not set, will default to the associated auth method, ex: auth/userpass/.. or auth/kubernetes/..</span>
<span class="token property">VAULT_AUTH_MOUNT</span> <span class="token punctuation">=</span> <span class="token string">"custom-auth-path"</span>

<span class="token comment"># Vault token for vault access</span>
<span class="token property">VAULT_TOKEN</span> <span class="token punctuation">=</span> <span class="token string">"SiQOECxwSDCeQt1r0n5kqQCr"</span>
<span class="token comment"># path to file containing vault token</span>
<span class="token property">VAULT_TOKEN_PATH</span> <span class="token punctuation">=</span> <span class="token string">"/path/to/vault/token"</span>

<span class="token comment"># user and password for userpass authentication</span>
<span class="token property">VAULT_USER</span> <span class="token punctuation">=</span> <span class="token string">"vault-kms-provider"</span>
<span class="token property">VAULT_PASSWORD</span> <span class="token punctuation">=</span> <span class="token string">"some-password"</span>
<span class="token comment"># path to file containing vault password</span>
<span class="token property">VAULT_PASSWORD_PATH</span> <span class="token punctuation">=</span> <span class="token string">"/path/to/vault/password"</span>

<span class="token comment"># path to mounted JWT for kubernetes auth</span>
<span class="token property">VAULT_KUBERNETES_JWT_PATH</span> <span class="token punctuation">=</span> <span class="token string">"/path/to/vault.jwt"</span>
<span class="token comment"># jwt for kubernetes auth</span>
<span class="token property">VAULT_KUBERNETES_JWT</span> <span class="token punctuation">=</span> <span class="token string">"jwt"</span>
<span class="token comment"># role for kubernetes auth </span>
<span class="token property">VAULT_KUBERNETES_ROLE</span> <span class="token punctuation">=</span> <span class="token string">"vault-kms-provider"</span>

<span class="token comment"># role_id and secret_id for approle authentication</span>
<span class="token property">VAULT_ROLE_ID</span> <span class="token punctuation">=</span> <span class="token string">"role"</span>
<span class="token property">VAULT_SECRET_ID</span> <span class="token punctuation">=</span> <span class="token string">"secret"</span>
<span class="token comment"># path to file containing secret id</span>
<span class="token property">VAULT_SECRET_ID_PATH</span> <span class="token punctuation">=</span> <span class="token string">"/path/to/secret/id"</span>

<span class="token comment"># jwt for jwt auth</span>
<span class="token property">VAULT_JWT</span> <span class="token punctuation">=</span> <span class="token string">"jwt"</span>
<span class="token comment"># path to mounted jwt for jwt auth</span>
<span class="token property">VAULT_JWT_PATH</span> <span class="token punctuation">=</span> <span class="token string">"/path/to/jwt"</span>
<span class="token comment"># role for jwt, optional</span>
<span class="token property">VAULT_JWT_ROLE</span> <span class="token punctuation">=</span> <span class="token string">"vault-kms-provider"</span>

<span class="token comment"># name of the trusted certificate created in vault for authentication</span>
<span class="token property">VAULT_CERTIFICATE_NAME</span> <span class="token punctuation">=</span> <span class="token string">"vault-kms-provider"</span>
<span class="token comment"># path to client cert and key for certificate authentication</span>
<span class="token property">VAULT_CLIENT_CERT</span> <span class="token punctuation">=</span> <span class="token string">"/path/to/client/public.crt"</span>
<span class="token property">VAULT_CLIENT_KEY</span> <span class="token punctuation">=</span> <span class="token string">"/path/to/client/private.key"</span></code></pre>
<p>Environment variables can be configured using the <code>env</code> property in the values.yaml, ex:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> VAULT_TOKEN
    <span class="token key atrule">valueFrom</span><span class="token punctuation">:</span>
      <span class="token key atrule">secretKeyRef</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> vault<span class="token punctuation">-</span>token<span class="token punctuation">-</span>secret
        <span class="token key atrule">key</span><span class="token punctuation">:</span> token</code></pre>
<p>The <code>envFrom</code> property is also configurable in the values.yaml file, allowing configMaps, etc to be added. ex:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">envFrom</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">configMapRef</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>custom<span class="token punctuation">-</span>config<span class="token punctuation">-</span>map</code></pre>

</div>

    </div>
</div>
    </body>
</html>
